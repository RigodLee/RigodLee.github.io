<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ElasticSearch学习笔记 | shadow</title><meta name="keywords" content="ElasticSearch"><meta name="author" content="shadow"><meta name="copyright" content="shadow"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="Elasticsearch 是一个分布式、RESTful 风格的搜索和数据分析引擎，能够解决不断涌现出的各种用例。  1.ES是什么Elasticsearch是一个基于Apache Lucene(TM)的开源搜索引擎，无论在开源还是专有领域，Lucene可以被认为是迄今为止最先进、性能最好的、功能最全的搜索引擎库。 但是，Lucene只是一个库。想要发挥其强大的作用，你需使用Java并要将其集成到">
<meta property="og:type" content="article">
<meta property="og:title" content="ElasticSearch学习笔记">
<meta property="og:url" content="http://yoursite.com/2020/12/15/ElasticSearch%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="shadow">
<meta property="og:description" content="Elasticsearch 是一个分布式、RESTful 风格的搜索和数据分析引擎，能够解决不断涌现出的各种用例。  1.ES是什么Elasticsearch是一个基于Apache Lucene(TM)的开源搜索引擎，无论在开源还是专有领域，Lucene可以被认为是迄今为止最先进、性能最好的、功能最全的搜索引擎库。 但是，Lucene只是一个库。想要发挥其强大的作用，你需使用Java并要将其集成到">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/elasticsearch.png">
<meta property="article:published_time" content="2020-12-15T11:43:19.073Z">
<meta property="article:modified_time" content="2020-12-15T12:01:45.166Z">
<meta property="article:author" content="shadow">
<meta property="article:tag" content="ElasticSearch">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/elasticsearch.png"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/favicon.png"><link rel="canonical" href="http://yoursite.com/2020/12/15/ElasticSearch%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//pingjs.qq.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta name="baidu-site-verification" content="code-HywQ3i29Kl"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var _mtac = {};
(function() {
    var mta = document.createElement("script");
    mta.src = "//pingjs.qq.com/h5/stats.js?v2.0.4";
    mta.setAttribute("name", "MTAH5");
    mta.setAttribute("sid", "66575582");
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(mta, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '4.2.1',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-12-15 20:01:45'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {
  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }

  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }
})()</script><link rel="stylesheet" href="/css/shadow.css"><link rel="stylesheet" href="/css/icon.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/StaticFile_HEXO@latest/butterfly/css/plugins.min.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">40</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">28</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">14</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tools/"><i class="fa-fw fab fa-tencent-weibo card-announcement-animation-blue"></i><span> 导航</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 图片</span></a></li></ul></div></div></div></div><div id="body-wrap"><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-ES是什么"><span class="toc-text">1.ES是什么</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-ES中的重要概念"><span class="toc-text">2. ES中的重要概念</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-ES的安装"><span class="toc-text">3. ES的安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-ES可视化工具-–-ElasticSearch-head"><span class="toc-text">4. ES可视化工具 – ElasticSearch-head</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-Kibana"><span class="toc-text">5. Kibana</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-Kibana安装"><span class="toc-text">5.1 Kibana安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-Kibana使用"><span class="toc-text">5.2 Kibana使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-命令模式的使用"><span class="toc-text">6. 命令模式的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-Rest风格说明"><span class="toc-text">6.1 Rest风格说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-命令测试"><span class="toc-text">6.2 命令测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-创建索引"><span class="toc-text">6.3 创建索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-创建文档"><span class="toc-text">6.2 创建文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-cat命令"><span class="toc-text">6.3 cat命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-修改文档"><span class="toc-text">6.4 修改文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-删除文档"><span class="toc-text">6.5 删除文档</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-简单查询"><span class="toc-text">6.6 简单查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-复杂搜索"><span class="toc-text">6.7 复杂搜索</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8-多条件查询"><span class="toc-text">6.8 多条件查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-9-高亮-自定义高亮样式"><span class="toc-text">6.9 高亮+自定义高亮样式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-IK分词器"><span class="toc-text">7. IK分词器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-IK分词器安装"><span class="toc-text">7.1 IK分词器安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-IK分词器测试"><span class="toc-text">7.2 IK分词器测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-自定义词库"><span class="toc-text">7.3 自定义词库</span></a></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/elasticsearch.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">shadow</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tools/"><i class="fa-fw fab fa-tencent-weibo card-announcement-animation-blue"></i><span> 导航</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 图片</span></a></li></ul></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">ElasticSearch学习笔记</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-12-15T11:43:19.073Z" title="发表于 2020-12-15 19:43:19">2020-12-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-12-15T12:01:45.166Z" title="更新于 2020-12-15 20:01:45">2020-12-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/ElasticSearch/">ElasticSearch</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>11分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p><img src="https://img-blog.csdnimg.cn/20201214213424488.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>Elasticsearch 是一个分布式、RESTful 风格的搜索和数据分析引擎，能够解决不断涌现出的各种用例。 </p>
<h1 id="1-ES是什么"><a href="#1-ES是什么" class="headerlink" title="1.ES是什么"></a>1.ES是什么</h1><p>Elasticsearch是一个基于Apache Lucene(TM)的开源搜索引擎，无论在开源还是专有领域，Lucene可以被认为是迄今为止最先进、性能最好的、功能最全的搜索引擎库。 但是，Lucene只是一个库。想要发挥其强大的作用，你需使用Java并要将其集成到你的应用中。Lucene非常复杂，你需要深入的了解检索相关知识来理解它是如何工作的。<br>Elasticsearch也是使用Java编写并使用Lucene来建立索引并实现搜索功能，但是它的目的是通过简单连贯的RESTful API让全文搜索变得简单并隐藏Lucene的复杂性。 不过，Elasticsearch不仅仅是Lucene和全文搜索引擎，它还提供：</p>
<ul>
<li>分布式的实时文件存储，每个字段都被索引并可被搜索</li>
<li>实时分析的分布式搜索引擎</li>
<li>可以扩展到上百台服务器，处理PB级结构化或非结构化数据</li>
</ul>
<p>而且，所有的这些功能被集成到一台服务器，你的应用可以通过简单的RESTful API、各种语言的客户端甚至命令行与之交互。上手Elasticsearch非常简单，它提供了许多合理的缺省值，并对初学者隐藏了复杂的搜索引擎理论。它开箱即用（安装即可使用），只需很少的学习既可在生产环境中使用。Elasticsearch在Apache 2 license下许可使用，可以免费下载、使用和修改。 随着知识的积累，你可以根据不同的问题领域定制Elasticsearch的高级特性，这一切都是可配置的，并且配置非常灵活。</p>
<h1 id="2-ES中的重要概念"><a href="#2-ES中的重要概念" class="headerlink" title="2. ES中的重要概念"></a>2. ES中的重要概念</h1><p>Elasticsearch有几个核心概念。从一开始理解这些概念会对整个学习过程有莫大的帮助。<br><strong>（1）接近实时（NRT）</strong><br>Elasticsearch是一个接近实时的搜索平台。这意味着，从索引一个文档直到这个文档能够被搜索到有一个轻微的延迟（通常是1秒）。<br><strong>（2）集群（cluster</strong>）<br>一个集群就是由一个或多个节点组织在一起，它们共同持有你整个的数据，并一起提供索引和搜索功能。一个集群由一个唯一的名字标识，这个名字默认就是“elasticsearch”。这个名字是重要的，因为一个节点只能通过指定某个集群的名字，来加入这个集群。在产品环境中显式地设定这个名字是一个好习惯，但是使用默认值来进行测试/开发也是不错的。<br><strong>（3）节点（node）</strong><br>一个节点是你集群中的一个服务器，作为集群的一部分，它存储你的数据，参与集群的索引和搜索功能。和集群类似，一个节点也是由一个名字来标识的，默认情况下，这个名字是一个随机的漫威漫画角色的名字，这个名字会在启动的时候赋予节点。这个名字对于管理工作来说挺重要的，因为在这个管理过程中，你会去确定网络中的哪些服务器对应于Elasticsearch集群中的哪些节点。<br>一个节点可以通过配置集群名称的方式来加入一个指定的集群。默认情况下，每个节点都会被安排加入到一个叫做“elasticsearch”的集群中，这意味着，如果你在你的网络中启动了若干个节点，并假定它们能够相互发现彼此，它们将会自动地形成并加入到一个叫做“elasticsearch”的集群中。<br>在一个集群里，只要你想，可以拥有任意多个节点。而且，如果当前你的网络中没有运行任何Elasticsearch节点，这时启动一个节点，会默认创建并加入一个叫做“elasticsearch”的集群。<br><strong>（4）索引（index）</strong><br>一个索引就是一个拥有几分相似特征的文档的集合。比如说，你可以有一个客户数据的索引，另一个产品目录的索引，还有一个订单数据的索引。一个索引由一个名字来标识（必须全部是小写字母的），并且当我们要对对应于这个索引中的文档进行索引、搜索、更新和删除的时候，都要使用到这个名字。<font  color='red'>索引类似于关系型数据库中Database的概念。</font>在一个集群中，如果你想，可以定义任意多的索引。<br><strong>（5）类型（type）</strong><br>在一个索引中，你可以定义一种或多种类型。一个类型是你的索引的一个逻辑上的分类/分区，其语义完全由你来定。通常，会为具有一组共同字段的文档定义一个类型。比如说，我们假设你运营一个博客平台并且将你所有的数据存储到一个索引中。在这个索引中，你可以为用户数据定义一个类型，为博客数据定义另一个类型，当然，也可以为评论数据定义另一个类型。<font  color='red'>类型类似于关系型数据库中Table的概念。</font><br><strong>（6）文档（document）</strong><br>一个文档是一个可被索引的基础信息单元。比如，你可以拥有某一个客户的文档，某一个产品的一个文档，当然，也可以拥有某个订单的一个文档。文档以JSON（Javascript Object Notation）格式来表示，而JSON是一个到处存在的互联网数据交互格式。<br>在一个index/type里面，只要你想，你可以存储任意多的文档。注意，尽管一个文档，物理上存在于一个索引之中，文档必须被索引/赋予一个索引的type。文档类似于关系型数据库中Record的概念。实际上一个文档除了用户定义的数据外，还包括_index、_type和_id字段。<br><strong>（7）分片和复制（shards &amp; replicas）</strong><br>一个索引可以存储超出单个结点硬件限制的大量数据。比如，一个具有10亿文档的索引占据1TB的磁盘空间，而任一节点都没有这样大的磁盘空间；或者单个节点处理搜索请求，响应太慢。<br>为了解决这个问题，Elasticsearch提供了将索引划分成多份的能力，这些份就叫做分片。当你创建一个索引的时候，你可以指定你想要的分片的数量。每个分片本身也是一个功能完善并且独立的“索引”，这个“索引”可以被放置到集群中的任何节点上。<br>分片之所以重要，主要有两方面的原因：</p>
<ul>
<li>允许你水平分割/扩展你的内容容量</li>
<li>允许你在分片（潜在地，位于多个节点上）之上进行分布式的、并行的操作，进而提高性能/吞吐量<br>至于一个分片怎样分布，它的文档怎样聚合回搜索请求，是完全由Elasticsearch管理的，对于作为用户的你来说，这些都是透明的。<br>在一个网络/云的环境里，失败随时都可能发生，在某个分片/节点不知怎么的就处于离线状态，或者由于任何原因消失了。这种情况下，有一个故障转移机制是非常有用并且是强烈推荐的。为此目的，Elasticsearch允许你创建分片的一份或多份拷贝，这些拷贝叫做复制分片，或者直接叫复制。复制之所以重要，主要有两方面的原因：</li>
<li>在分片/节点失败的情况下，提供了高可用性。因为这个原因，注意到复制分片从不与原/主要（original/primary）分片置于同一节点上是非常重要的。</li>
<li>扩展你的搜索量/吞吐量，因为搜索可以在所有的复制上并行运行</li>
</ul>
<p>总之，每个索引可以被分成多个分片。一个索引也可以被复制0次（意思是没有复制）或多次。一旦复制了，每个索引就有了主分片（作为复制源的原来的分片）和复制分片（主分片的拷贝）之别。分片和复制的数量可以在索引创建的时候指定。在索引创建之后，你可以在任何时候动态地改变复制数量，但是不能改变分片的数量。<br>默认情况下，Elasticsearch中的每个索引被分片5个主分片和1个复制，这意味着，如果你的集群中至少有两个节点，你的索引将会有5个主分片和另外5个复制分片（1个完全拷贝），这样的话每个索引总共就有10个分片。一个索引的多个分片可以存放在集群中的一台主机上，也可以存放在多台主机上，这取决于你的集群机器数量。主分片和复制分片的具体位置是由ES内在的策略所决定的。<br>以上部分内容转自<a href="https://blog.csdn.net/cnweike/article/details/33736429" target="_blank" rel="noopener">Elasticsearch基础教程</a></p>
<h1 id="3-ES的安装"><a href="#3-ES的安装" class="headerlink" title="3. ES的安装"></a>3. ES的安装</h1><p>ES具有开箱即用的特点，只需要在官网下载压缩包，解压就可以直接使用。这里演示的是windoxs版本的安装与配置，打开<a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener">官网下载页面</a>，选择相应版本点击下载即可。<br><img src="https://img-blog.csdnimg.cn/20201214221508127.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>如果想下载历史版本，可以下滑点击<font color='#0077CC'>past releases</font><br><img src="https://img-blog.csdnimg.cn/20201214221707287.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>下载解压后打开ES的bin目录，点击elasticsearch.bat启动ES<br><img src="https://img-blog.csdnimg.cn/20201214222126710.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>启动成功后，打开浏览器输入localhost:9200。如果显示下面的信息，则表示ES安装成功。<br><img src="https://img-blog.csdnimg.cn/20201214222407749.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="4-ES可视化工具-–-ElasticSearch-head"><a href="#4-ES可视化工具-–-ElasticSearch-head" class="headerlink" title="4. ES可视化工具 – ElasticSearch-head"></a>4. ES可视化工具 – ElasticSearch-head</h1><p>ElasticSearch-head可以对ES数据进行可视化操作，可以通过下载ElasticSearch-head插件，放入ES下的plugins插件目录。最快捷的方式是直接下载chrome插件，在浏览器安装插件即可。<br><img src="https://img-blog.csdnimg.cn/20201214222741234.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>ElasticSearch-head的安装可以参考<a href="https://blog.csdn.net/liumiaocn/article/details/98510781" target="_blank" rel="noopener">可视化工具之elasticsearch-head</a></p>
<h1 id="5-Kibana"><a href="#5-Kibana" class="headerlink" title="5. Kibana"></a>5. Kibana</h1><p>Kibana是一个针对Elasticsearch的开源分析及可视化平台，用来搜索、查看交互存储在Elasticsearch索引中的数据。使用Kibana，可以通过各种图表进行高级数据分析及展示。<br>Kibana让海量数据更容易理解。它操作简单，基于浏览器的用户界面可以快速创建仪表板（dashboard）实时显示Elasticsearch查询动态。<br>设置Kibana非常简单。无需编码或者额外的基础架构，几分钟内就可以完成Kibana安装并启动Elasticsearch索引监测。</p>
<h2 id="5-1-Kibana安装"><a href="#5-1-Kibana安装" class="headerlink" title="5.1 Kibana安装"></a>5.1 Kibana安装</h2><p>Kibana也是开箱即用，只需下载解压安装包即可使用。下载时要选择与ES对应的版本！解压完成后进入bin目录下点击kibana.bat启动<br>下载地址： <a href="https://www.elastic.co/downloads/kibana" target="_blank" rel="noopener">https://www.elastic.co/downloads/kibana</a><br><img src="https://img-blog.csdnimg.cn/2020121423453661.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="5-2-Kibana使用"><a href="#5-2-Kibana使用" class="headerlink" title="5.2 Kibana使用"></a>5.2 Kibana使用</h2><p>打开浏览器输入<a href="http://localhost:5601/" target="_blank" rel="noopener">http://localhost:5601/</a><br><img src="https://img-blog.csdnimg.cn/20201214234733637.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="6-命令模式的使用"><a href="#6-命令模式的使用" class="headerlink" title="6. 命令模式的使用"></a>6. 命令模式的使用</h1><h2 id="6-1-Rest风格说明"><a href="#6-1-Rest风格说明" class="headerlink" title="6.1 Rest风格说明"></a>6.1 Rest风格说明</h2><table><thead><tr><th align="center">method</th><th align="center">url地址</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">PUT</td><td align="center">localhost:9200/索引名称/类型名称/文档id</td><td align="center">创建文档(指定文档id)</td></tr><tr><td align="center">POST</td><td align="center">localhost:9200/索引名称/类型名称</td><td align="center">创建文档（随机文档id）</td></tr><tr><td align="center">POST</td><td align="center">localhost:9200/索引名称/类型名称/文档id/_update</td><td align="center">修改文档</td></tr><tr><td align="center">DELETE</td><td align="center">localhost:9200/索引名称/类型名称/文档id</td><td align="center">删除文档</td></tr><tr><td align="center">GET</td><td align="center">localhost:9200/索引名称/类型名称/文档id</td><td align="center">通过文档id查询文档</td></tr><tr><td align="center">POST</td><td align="center">localhost:9200/索引名称/类型名称/_search</td><td align="center">查询所有的数据</td></tr></tbody></table>

<h2 id="6-2-命令测试"><a href="#6-2-命令测试" class="headerlink" title="6.2 命令测试"></a>6.2 命令测试</h2><h3 id="6-3-创建索引"><a href="#6-3-创建索引" class="headerlink" title="6.3 创建索引"></a>6.3 创建索引</h3><p>PUT /索引名{ 请求体 }<br><img src="https://img-blog.csdnimg.cn/20201215162101835.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="6-2-创建文档"><a href="#6-2-创建文档" class="headerlink" title="6.2 创建文档"></a>6.2 创建文档</h3><p>POST /索引名/类型名/文档id{ 请求体 }<br><img src="https://img-blog.csdnimg.cn/20201215162354723.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>可以先创建索引再创建文档，也可以直接创建文档。这时候ES会创建文档，并自动创建一个索引，将文档放入索引中。文档中的字段类型ES会自动指定默认类型。<br>POST /test2/_doc/1{ 请求体 }<br><img src="https://img-blog.csdnimg.cn/20201215164546609.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201215164635126.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="6-3-cat命令"><a href="#6-3-cat命令" class="headerlink" title="6.3 cat命令"></a>6.3 cat命令</h3><p>获取健康值 GET _cat/health<br><img src="https://img-blog.csdnimg.cn/20201215164930416.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>获取所有的信息 GET _cat/indices?v<br><img src="https://img-blog.csdnimg.cn/20201215165158775.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="6-4-修改文档"><a href="#6-4-修改文档" class="headerlink" title="6.4 修改文档"></a>6.4 修改文档</h3><p>可以使用PUT命令修改，当时PUT修改有个弊端。当使用PUT修改文档的时候，如果文档有某些字段没有修改，则原先的字段会被置空<br><img src="https://img-blog.csdnimg.cn/20201215170107900.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201215170155802.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>也可以使用POST修改文档，如果不修改某字段，该字段会保留原数据，不会被置空。但是URL上一定要加上<font color='red'>_update</font>，不然也会将原字段置空<br><img src="https://img-blog.csdnimg.cn/20201215170653565.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201215170746913.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="6-5-删除文档"><a href="#6-5-删除文档" class="headerlink" title="6.5 删除文档"></a>6.5 删除文档</h3><p>DELETE 索引名/类型名/文档id<br><img src="https://img-blog.csdnimg.cn/20201215171022283.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="6-6-简单查询"><a href="#6-6-简单查询" class="headerlink" title="6.6 简单查询"></a>6.6 简单查询</h3><p>GET 索引名/类型名/_search?q=字段名:字段值<br>这里搜索的是李四，但是搜索结果是张四。这是因为name字段是text类型，搜索的时候会进行分词搜索。而索引中是没有李四这个文档的，所以搜索结果只有一个张四<br><img src="https://img-blog.csdnimg.cn/20201215171542865.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="6-7-复杂搜索"><a href="#6-7-复杂搜索" class="headerlink" title="6.7 复杂搜索"></a>6.7 复杂搜索</h3><p><img src="https://img-blog.csdnimg.cn/20201215172247381.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>（1）结果过滤，只展示列表中某些字段<br><img src="https://img-blog.csdnimg.cn/20201215172722244.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>（2）包含<br><img src="https://img-blog.csdnimg.cn/20201215191541278.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>（3）不包括<br><img src="https://img-blog.csdnimg.cn/20201215191715290.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>（4）排序<br><img src="https://img-blog.csdnimg.cn/20201215191906797.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>（5）分页<br><img src="https://img-blog.csdnimg.cn/20201215192028584.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="6-8-多条件查询"><a href="#6-8-多条件查询" class="headerlink" title="6.8 多条件查询"></a>6.8 多条件查询</h3><p>（1）布尔值查询——must 必须所有条件符合<br><img src="https://img-blog.csdnimg.cn/20201215192627630.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>（2）布尔值查询——should 符合某一条件即可<br><img src="https://img-blog.csdnimg.cn/20201215192911601.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>（3）布尔值查询——must_not 不符合条件<br><img src="https://img-blog.csdnimg.cn/20201215193024684.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>（4）布尔值查询——条件区间</p>
<ul>
<li>gt大于 </li>
<li>gte大于等于 </li>
<li>lte小于 </li>
<li>lte小于等于<br><img src="https://img-blog.csdnimg.cn/20201215193238332.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><h3 id="6-9-高亮-自定义高亮样式"><a href="#6-9-高亮-自定义高亮样式" class="headerlink" title="6.9 高亮+自定义高亮样式"></a>6.9 高亮+自定义高亮样式</h3><img src="https://img-blog.csdnimg.cn/20201215194225868.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><h1 id="7-IK分词器"><a href="#7-IK分词器" class="headerlink" title="7. IK分词器"></a>7. IK分词器</h1>使用ES默认的分词器，会把text的字段分成一个一个汉字。当搜索一个词语时，把将词语拆成独单的汉字进行搜索，分词效果不好。所以要使用IK分词器，IK分词是一款国人开发的相对简单的中文分词器。<h2 id="7-1-IK分词器安装"><a href="#7-1-IK分词器安装" class="headerlink" title="7.1 IK分词器安装"></a>7.1 IK分词器安装</h2>Github地址：<a href="https://github.com/medcl/elasticsearch-analysis-ik" target="_blank" rel="noopener">https://github.com/medcl/elasticsearch-analysis-ik</a><br>下载的时候需要下载和ES对应的版本，下载完成后按以下步骤完成安装：<br>（1）解压文件，将解压后的文件夹重命名为ik<br>（2）将ik文件夹拷贝到ES的plugins 目录下<br>（3）重新启动ES，即可加载IK分词器<br><img src="https://img-blog.csdnimg.cn/20201215000610958.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><h2 id="7-2-IK分词器测试"><a href="#7-2-IK分词器测试" class="headerlink" title="7.2 IK分词器测试"></a>7.2 IK分词器测试</h2>IK提供了两个分词算法ik_smart 和 ik_max_word<br>其中 ik_smart 为最少切分，ik_max_word为最细粒度切分<br>（1）最少切分<br><img src="https://img-blog.csdnimg.cn/20201215001232836.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>（2）最细粒度切分<br><img src="https://img-blog.csdnimg.cn/2020121500144361.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><h2 id="7-3-自定义词库"><a href="#7-3-自定义词库" class="headerlink" title="7.3 自定义词库"></a>7.3 自定义词库</h2>有时候我们搜索的词语可能是IK分词器默认词库中没有的，此时搜索该词语IK会分成单独的汉字。这时候我们可以通过配置，自定义词库。<br>（1）进入IK分词器的config目录，新建一个后缀名为dic的文件。用记事本打开文件，在里面添加词语，词语间要换行。<br><img src="https://img-blog.csdnimg.cn/20201215002101559.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>（2）打开IKAnalyzer.cfg.xml，在里面添加新建的词库文件名<br><img src="https://img-blog.csdnimg.cn/20201215002325599.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201215002438552.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg2ODI5OQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>（3）重启ES，就可以使用IK分词器了</li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">shadow</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/12/15/ElasticSearch%E7%AC%94%E8%AE%B0/">http://yoursite.com/2020/12/15/ElasticSearch%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">shadow</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ElasticSearch/">ElasticSearch</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/elasticsearch.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/12/25/Shiro%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/shiro.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Shiro学习笔记</div></div></a></div><div class="next-post pull-right"><a href="/2020/12/06/Docker%E5%AE%B9%E5%99%A8%E4%B8%ADNginx%E8%AE%BF%E9%97%AE%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6404/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/docker-nginx.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Docker下Nginx容器访问静态资源404</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></article></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/elasticsearch.png)"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By shadow</div><div class="framework-info"><span>框架 </span><a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener">Butterfly</a></div><div class="footer_custom_text"><a href="https://console.upyun.com/" target="_blank" alt="又拍云" rel="nofollow"><img src="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/upyun.png" alt="又拍云" style="height: 1.7em; max-height: 1.8em;padding-bottom: 0px;"></a>&nbsp;&nbsp;&nbsp;<a href="https://imgchr.com/" target="_blank" alt="路过图床" rel="nofollow"><img src="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/imgchr.png" alt="路过图床" style="height: 1.7em; max-height: 1.8em;padding-bottom: 0px;"></a>&nbsp;&nbsp;&nbsp;<a href="https://cloud.tencent.com/" target="_blank" alt="腾讯云" rel="nofollow"><img src="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/tencet.png" alt="腾讯云" style="height: 1.7em; max-height: 1.8em;padding-bottom: 0px;"></a>&nbsp;&nbsp;&nbsp;<a href="https://www.jsdelivr.com/" target="_blank" alt="JSDELIVR" rel="nofollow"><img src="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/jsdelivr.png" alt="JSDELIVR" style="height: 1.7em; max-height: 1.8em;padding-bottom: 0px;"></a>&nbsp;&nbsp;&nbsp;<a href="https://www.google.com/" target="_blank" alt="Google" rel="nofollow"><img src="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/google.png" alt="Google" style="height: 1.7em; max-height: 1.8em;padding-bottom: 0px;"></a></div></div><div class="footerimg"><img src="https://cdn.jsdelivr.net/gh/rigodlee/BLOGCDN/img/e92eef6d3d32097f37c9da214a6203e4.png"/></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const initData = {
      el: '#vcomment',
      appId: '86tYjSKxVIeagHLx1taPQQpB-gzGzoHsz',
      appKey: 'gbAhhCEoLtMqPHx6V8TexpVV',
      placeholder: '填写邮箱可以及时收到回复哦',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'en',
      recordIP: true,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
      master: 'd3ebbea1ed788cbceffb15b783740c2f',   //博主邮箱md5
      tagMeta: ["博主","小伙伴","访客"],     //标识字段名
      friends:  ["4300ec68e82de7bb12cff79d3893d1c5"],  //小伙伴邮箱Md5
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }

    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="https://myhkw.cn/player/js/player.js" id="myhk" key="159611061656" m="1"></script><script src="/js/shadow.js"></script><script src="/js/icon.js"></script><script src="https://cdn.jsdelivr.net/gh/xiabo2/CDN@latest/fishes.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script>(function(){
  const bp = document.createElement('script');
  const curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https'){
  bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  bp.dataset.pjax = ''
  const s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})()</script></div><script src="/live2d/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2d/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"display":{"position":"left","width":200,"height":400,"vOffset":-30},"mobile":{"show":true,"scale":0.5},"model":{"scale":1.2,"jsonPath":"/live2d/assets/hk416_3401.model.json"},"log":false});</script></body></html>